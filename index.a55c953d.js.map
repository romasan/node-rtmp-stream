{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-7a9dbbe425ae7f43.js","src/index.tsx","src/App.tsx","src/components/Modal/Modal.tsx","src/components/Modal/Modal.module.scss","node_modules/@parcel/runtime-js/lib/runtime-04e11bef74ce9cd4.js","node_modules/@parcel/runtime-js/lib/runtime-b3e96c88284c146a.js","node_modules/@parcel/runtime-js/lib/runtime-a164ad73d3672663.js","src/App.module.scss","node_modules/@parcel/runtime-js/lib/runtime-5ec3ab9c40214123.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"h00hi\\\":\\\"index.a55c953d.js\\\",\\\"i6uYg\\\":\\\"twitch.9765d80e.svg\\\",\\\"lORw5\\\":\\\"vkplay.1fe42d3c.svg\\\",\\\"72mLQ\\\":\\\"youtube.11029b0d.svg\\\",\\\"gkT8s\\\":\\\"discord.637209af.svg\\\",\\\"ikpnG\\\":\\\"index.dd6b4bca.css\\\",\\\"65DGO\\\":\\\"index.8f5a1ca9.js\\\"}\"));","import React from 'react'\nimport { createRoot } from 'react-dom/client';\nimport { App } from \"./App\";\nimport { start } from './lib/api';\nimport { connect } from './lib/ws';\n\nstart().then((text) => {\n\tif (text === 'fail') {\n\t\tdocument.location.reload();\n\n\t\treturn;\n\t}\n\n\tconnect();\n}).catch(() => {});\n\ncreateRoot(document.getElementById('root') as HTMLElement).render(<App />);\n","import React, { useState, useEffect } from 'react';\n\nimport mobile from 'is-mobile';\n\nimport { Canvas } from './components/Canvas';\nimport { Palette } from './components/Palette';\nimport { Modal } from './components/Modal';\n\nimport { addPix } from './lib/api';\nimport ee from './lib/ee';\n\nimport twitch from 'url:./res/twitch.svg';\nimport vkplay from 'url:./res/vkplay.svg';\nimport youtube from 'url:./res/youtube.svg';\nimport discord from 'url:./res/discord.svg';\n\nimport * as s from './App.module.scss';\n\nexport const App: React.FC = () => {\n\tconst [showed, toggle] = useState(false);\n\tconst [wsStore, setWsStore] = useState<any>({});\n\tconst [color, setColor] = useState('');\n\n\tconst isMobile = mobile();\n\n\tuseEffect(() => {\n\t\tif (!color && wsStore?.environment?.palette) {\n\t\t\tconst firstColor = 'black' in wsStore?.environment?.palette ? 'black' : (Object.keys(wsStore?.environment?.palette) || []).pop();\n\t\t\tsetColor(firstColor as string);\n\t\t}\n\t}, [color, wsStore]);\n\n\tconst handleCanvasClick = (x: number, y: number) => {\n\t\taddPix({ x, y, color });\n\t}\n\n\tconst handleOpenChatClick = () => {\n\t\twindow.open('https://vkplay.live/pixel_battle/only-chat', '', `width=500,height=500,left=${window.innerWidth / 2 - 250},top=${window.innerHeight / 2 - 250}`);\n\t};\n\n\tconst handleTwitchLoginClick = () => {\n\t\tconst { hostname, protocol } = document.location;\n\t\tconst APIhost = `${protocol}//${hostname === 'localhost' ? '' : 'api.'}${hostname.replace('www.', '')}:8080`;\n\t\t// window.open(`${APIhost}/auth/twitch`, '', `width=500,height=500,left=${window.innerWidth / 2 - 250},top=${window.innerHeight / 2 - 250}`);\n\t\tdocument.location.href = `${APIhost}/auth/twitch`;\n\t};\n\n\tuseEffect(() => {\n\t\tee.on('ws:environment', (payload: any) => {\n\t\t\tsetWsStore((store = {}) => ({ ...store, environment: payload }));\n\t\t});\n\t}, []);\n\n\treturn (\n\t\t<div className={isMobile ? 'mobile' : ''}>\n\t\t\t<Canvas color={wsStore?.environment?.palette[color]} onClick={handleCanvasClick} />\n\t\t\t{wsStore?.environment?.palette && (\n\t\t\t\t<Palette color={color} colors={wsStore?.environment?.palette} setColor={setColor} />\n\t\t\t)}\n\t\t\t{showed && (\n\t\t\t\t<Modal onClose={() => toggle(false)}>\n\t\t\t\t\t<div className={s.joinModalContent}>\n\t\t\t\t\t\t<div>Чтобы присоединиться к PIXEL BATTLE</div>\n\t\t\t\t\t\t<div>напиши свой ник на VK Play</div>\n\t\t\t\t\t\t<div><input type=\"text\" className={s.input} placeholder=\"nickname\" /></div>\n\t\t\t\t\t\t<div>и отправь в чат стрима <span className={s.command}>!join</span></div>\n\t\t\t\t\t\t<button onClick={handleOpenChatClick} className={s.button}>ОТКРЫТЬ ЧАТ</button>\n\t\t\t\t\t\t<button onClick={handleTwitchLoginClick} className={s.button}>Залогинься через Twitch</button>\n\t\t\t\t\t\t<div>или</div>\n\t\t\t\t\t\t<button onClick={handleTwitchLoginClick} className={s.button}>Залогинься через ВК</button>\n\t\t\t\t\t</div>\n\t\t\t\t</Modal>\n\t\t\t)}\n\t\t\t<div className={s.footer}>\n\t\t\t\t<a href=\"https://vkplay.live/place_tv\" target=\"_blank\">\n\t\t\t\t\t<img src={vkplay} />\n\t\t\t\t</a>\n\t\t\t\t<a href=\"https://www.twitch.tv/place_ru\" target=\"_blank\">\n\t\t\t\t\t<img src={twitch} />\n\t\t\t\t</a>\n\t\t\t\t<a href=\"https://www.youtube.com/@Place-ru\" target=\"_blank\">\n\t\t\t\t\t<img src={youtube} />\n\t\t\t\t</a>\n\t\t\t\t<a href=\"https://discord.gg/FfVjurYrus\" target=\"_blank\">\n\t\t\t\t\t<img src={discord} />\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n","import React, { FC, PropsWithChildren } from 'react';\n\nimport * as s from './Modal.module.scss';\n\ninterface Props {\n\tonClose(): void;\n\twidth?: string;\n\theight?: string;\n}\n\nexport const Modal: FC<PropsWithChildren<Props>> = ({\n\tchildren,\n\tonClose,\n\twidth = '500px',\n\theight = '350px',\n}) => {\n\treturn (\n\t\t<div className={s.root}>\n\t\t\t<div className={s.window} style={{ width, height }}>\n\t\t\t\t<div className={s.close} onClick={onClose}>&times;</div>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","@import \"../../styles/mixins\";\n\n.root {\n\tbackground: rgba(0, 0, 0, .5);\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.window {\n\t@include windowLike();\n\n\tposition: relative;\n\tpadding: 15px;\n\tcolor: black;\n}\n\n.close {\n\tposition: absolute;\n\ttop: 10px;\n\tright: 10px;\n\twidth: 30px;\n\theight: 30px;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tbox-sizing: border-box;\n\tpadding: 2px;\n\tborder-radius: 5px;\n\tfont-size: 23px;\n\tcursor: pointer;\n\n\t&:hover {\n\t\tborder-style: solid;\n\t\tborder-width: 2px;\n\t\tborder-right-color: $color-window-border-dark;\n\t\tborder-bottom-color: $color-window-border-dark;\n\t\tborder-top-color: $color-window-border-light;\n\t\tborder-left-color: $color-window-border-light;\n\t\tcolor: #ff0000;\n\t}\n\n\t&:active {\n\t\tpadding: 3px 1px 1px 3px;\n\t\tbackground-color: #8080a6;\n\t\tborder-top-color: $color-window-border-dark;\n\t\tborder-left-color: $color-window-border-dark;\n\t\tborder-right-color: $color-window-border-light;\n\t\tborder-bottom-color: $color-window-border-light;\n\t}\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"i6uYg\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"lORw5\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"72mLQ\")).toString();","@import \"./styles/mixins\";\n\n.joinModalContent {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\theight: 100%;\n\tgap: 20px;\n\tfont-size: 20px;\n\tfont-weight: bold;\n}\n\n.command {\n\tbackground: #9594c0;\n\tpadding: 3px;\n\tborder-radius: 3px;\n\tcursor: pointer;\n}\n\n.input {\n\tborder-style: solid;\n\tborder-width: 2px;\n\tborder-right-color: #b6b5eb;\n\tborder-bottom-color: #b6b5eb;\n\tborder-top-color: #2d2d3a;\n\tborder-left-color: #2d2d3a;\n\tbackground: #bbbaf1;\n\tfont-family: 'Custom Font', monospace;\n\tfont-size: 20px;\n\tfont-weight: bold;\n\tpadding: 10px;\n\twidth: 400px;\n\ttext-align: center;\n\tborder-radius: 5px;\n\n\t&:focus{\n\t\toutline: none;\n\t\t&::placeholder {\n\t\t\tcolor: transparent;\n\t\t}\n\t}\n\n\t&::placeholder {\n\t\ttext-transform: uppercase;\n\t}\n}\n\n.button {\n\t@include buttonLike();\n\n\tfont-family: 'Custom Font', monospace;\n\tfont-size: 20px;\n\tfont-weight: bold;\n}\n\n.footer {\n\tdisplay: flex;\n\tgap: 10px;\n\tposition: absolute;\n\tbottom: 10px;\n\tright: 10px;\n}\n\n:global(.mobile) {\n\t.footer {\n\t\tdisplay: none;\n\t}\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"gkT8s\")).toString();"],"names":["$18c11f3350a906ea$export$6503ec6e8aabbaf","$18c11f3350a906ea$export$f7ad0328861e2f03","$18c11f3350a906ea$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$ayMG0","$a5fe3119a76402fb$export$2b77a92f1a5ad772","children","onClose","width","height","jsx","className","jsxs","style","onClick","$4a52df9f8a6b86ee$exports","URL","resolve","url","toString","$837a2a6fe32620b1$exports","$a0ec7732f8a8c3a0$exports","$219fb9456f9cf8db$export$2ba01fb71ed41cb6","$523a8ceac22ac24a$exports","$5LNJK","start","then","text","$ksj8G","connect","document","location","reload","catch","$aRPiL","createRoot","getElementById","render","showed","toggle","$acw62","useState","wsStore","setWsStore","color","setColor","isMobile","$parcel$interopDefault","$fAX6M","useEffect","environment","palette","firstColor","pop","handleTwitchLoginClick","hostname","protocol","APIhost","replace","href","$im20c","default","on","payload","store","$iWcyK","Canvas","x","y","addPix","$7SRiy","Palette","colors","type","placeholder","window","open","innerWidth","innerHeight","target","src"],"version":3,"file":"index.a55c953d.js.map"}