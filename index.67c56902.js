function e(e,t,s,a){Object.defineProperty(e,t,{get:s,set:a,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},n={},o=s.parcelRequire8661;null==o&&((o=function(e){if(e in a)return a[e].exports;if(e in n){var t=n[e];delete n[e];var s={id:e,exports:{}};return a[e]=s,t.call(s.exports,s,s.exports),s.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){n[e]=t},s.parcelRequire8661=o),o.register("27Lyk",(function(t,s){var a,n;e(t.exports,"register",(()=>a),(e=>a=e)),e(t.exports,"resolve",(()=>n),(e=>n=e));var o={};a=function(e){for(var t=Object.keys(e),s=0;s<t.length;s++)o[t[s]]=e[t[s]]},n=function(e){var t=o[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),o("27Lyk").register(JSON.parse('{"h00hi":"index.67c56902.js","i6uYg":"twitch.9765d80e.svg","lORw5":"vkplay.1fe42d3c.svg","72mLQ":"youtube.11029b0d.svg","gkT8s":"discord.637209af.svg","lcOom":"login.4e45ee9c.svg","9fS6N":"logout.2f03def3.svg","ikpnG":"index.6bea2387.css","if8y0":"index.3fa1e1c4.js"}'));var i=o("ayMG0");o("acw62");var r=o("aRPiL"),l=(i=o("ayMG0"),o("acw62")),c=o("fAX6M");o("7Iabx"),o("iWcyK");i=o("ayMG0");o("acw62");var d=o("1D3Re");const h=({})=>{const{anchorRef:e,draggableRef:t}=(0,d.useDraggable)({x:document.body.offsetWidth-380,y:10});return(0,i.jsxs)("div",{className:"E3mhTa_root",ref:t,children:[(0,i.jsx)("div",{className:"E3mhTa_draggable",ref:e}),(0,i.jsxs)("div",{className:"E3mhTa_content",children:[(0,i.jsx)("div",{children:"FOO"}),(0,i.jsx)("div",{children:"BAR"}),(0,i.jsx)("div",{children:"BUZ"}),(0,i.jsx)("div",{children:"akdjfhl ajhdf lkajsdhf lkjasdhf lkajsdhf lkajsdhf lkajdshf lkajsdhf lakjsdhf laksjdhf lkasjdhf lkasjhdf lkajsf "})]}),(0,i.jsx)("div",{children:(0,i.jsx)("input",{type:"text"})})]})};i=o("ayMG0");o("acw62");i=o("ayMG0");o("acw62");const u=({children:e,onClose:t,width:s="500px",height:a="350px"})=>(0,i.jsx)("div",{className:"i0np6q_root",children:(0,i.jsxs)("div",{className:"i0np6q_window",style:{width:s,height:a},children:[(0,i.jsx)("div",{className:"i0np6q_close",onClick:t,children:"×"}),e]})});o("7SRiy");var f,p=o("iWcyK"),j=o("7SRiy"),x=o("5LNJK"),w=o("im20c");f=new URL(o("27Lyk").resolve("i6uYg"),import.meta.url).toString();var v;v=new URL(o("27Lyk").resolve("lORw5"),import.meta.url).toString();var m;m=new URL(o("27Lyk").resolve("72mLQ"),import.meta.url).toString();var g;g=new URL(o("27Lyk").resolve("gkT8s"),import.meta.url).toString();var _;_=new URL(o("27Lyk").resolve("lcOom"),import.meta.url).toString();var k,y,b;k=new URL(o("27Lyk").resolve("9fS6N"),import.meta.url).toString(),y="B2wDDG_button",b="B2wDDG_iconButton";const R={onMouseDown:e=>e.stopPropagation(),onMouseMove:e=>e.stopPropagation(),onMouseUp:e=>e.stopPropagation()};x=o("5LNJK");var N=o("ksj8G");(0,x.start)().then((e=>{"fail"!==e?(0,N.connect)():document.location.reload()})).catch((()=>{})),(0,r.createRoot)(document.getElementById("root")).render((0,i.jsx)((()=>{const[e,s]=(0,l.useState)(!1),[a,n]=(0,l.useState)({}),[o,r]=(0,l.useState)(""),[d,N]=(0,l.useState)(!1),[S,D]=(0,l.useState)(!1),[L,E]=(0,l.useState)(0),H=t(c)();(0,l.useEffect)((()=>{if(!o&&a?.palette){const e="black"in a?.palette?"black":(Object.keys(a?.palette)||[]).pop();r(e)}}),[o,a]);const G=()=>{const{hostname:e,protocol:t}=document.location,s=`${t}//${"localhost"===e?"":"api."}${e.replace("www.","")}:8080`;document.location.href=`${s}/auth/twitch`};return(0,l.useEffect)((()=>{w.default.on("ws:init",(e=>{n(((t={})=>({...t,...e}))),E(Date.now()+e?.countdown),D(e?.isAuthorized)})),w.default.on("ws:countdown",(e=>{n(((t={})=>({...t,countdown:e}))),E(Date.now()+e)})),w.default.on("ws:pix",(e=>{}))}),[]),(0,i.jsxs)("div",{className:H?"mobile":"",children:[(0,i.jsx)("div",{className:"B2wDDG_header",...R,children:S?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"B2wDDG_userName",children:a?.name}),(0,i.jsx)("a",{href:"/logout",children:(0,i.jsx)("img",{src:t(k),className:b})})]}):(0,i.jsx)("a",{href:"/login",children:(0,i.jsx)("img",{src:t(_),className:b})})}),(0,i.jsx)(p.Canvas,{color:a?.palette?.[o],onClick:(e,t)=>{(0,x.addPix)({x:e,y:t,color:o})},expiration:L}),a?.palette&&(0,i.jsx)(j.Palette,{color:o,colors:a?.palette,setColor:r,expiration:L}),e&&(0,i.jsx)(u,{onClose:()=>s(!1),children:(0,i.jsxs)("div",{className:"B2wDDG_joinModalContent",children:[(0,i.jsx)("div",{children:"Чтобы присоединиться к PIXEL BATTLE"}),(0,i.jsx)("div",{children:"напиши свой ник на VK Play"}),(0,i.jsx)("div",{children:(0,i.jsx)("input",{type:"text",className:"B2wDDG_input",placeholder:"nickname"})}),(0,i.jsxs)("div",{children:["и отправь в чат стрима ",(0,i.jsx)("span",{className:"B2wDDG_command",children:"!join"})]}),(0,i.jsx)("button",{onClick:()=>{window.open("https://vkplay.live/pixel_battle/only-chat","",`width=500,height=500,left=${window.innerWidth/2-250},top=${window.innerHeight/2-250}`)},className:y,children:"ОТКРЫТЬ ЧАТ"}),(0,i.jsx)("button",{onClick:G,className:y,children:"Залогинься через Twitch"}),(0,i.jsx)("div",{children:"или"}),(0,i.jsx)("button",{onClick:G,className:y,children:"Залогинься через ВК"})]})}),(0,i.jsxs)("div",{className:"B2wDDG_footer",...R,children:[(0,i.jsx)("a",{href:"https://vkplay.live/place_tv",target:"_blank",children:(0,i.jsx)("img",{src:t(v)})}),(0,i.jsx)("a",{href:"https://www.twitch.tv/place_ru",target:"_blank",children:(0,i.jsx)("img",{src:t(f)})}),(0,i.jsx)("a",{href:"https://www.youtube.com/@Place-ru",target:"_blank",children:(0,i.jsx)("img",{src:t(m)})}),(0,i.jsx)("a",{href:"https://discord.gg/FfVjurYrus",target:"_blank",children:(0,i.jsx)("img",{src:t(g)})})]}),d&&(0,i.jsx)(h,{})]})}),{}));
//# sourceMappingURL=index.67c56902.js.map
