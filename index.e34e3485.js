function e(e,t,o,n){Object.defineProperty(e,t,{get:o,set:n,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},s={},a=o.parcelRequire8661;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in s){var t=s[e];delete s[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){s[e]=t},o.parcelRequire8661=a),a.register("dRo73",(function(t,o){var n,s;e(t.exports,"register",(()=>n),(e=>n=e)),e(t.exports,"resolve",(()=>s),(e=>s=e));var a={};n=function(e){for(var t=Object.keys(e),o=0;o<t.length;o++)a[t[o]]=e[t[o]]},s=function(e){var t=a[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),a("dRo73").register(JSON.parse('{"aRmpQ":"index.e34e3485.js","bgmjR":"twitch.9765d80e.svg","1fsQy":"vkplay.1fe42d3c.svg","bWvRY":"youtube.11029b0d.svg","9Tcmb":"telegram.59b820bd.svg","aX6ps":"chat.b83a1653.svg","ayPb0":"login.5d897507.svg","cqsRl":"logout.a36fbb3d.svg","24uN4":"info.1855216b.svg","9M2pu":"index.286f6a21.css","hgPYh":"index.a02294f2.js"}'));var r=a("iM5HV");a("fYo6y");var l,i=a("b2S2j"),c=(r=a("iM5HV"),a("fYo6y")),d=a("PTcTU"),u=a("fvstS"),f=a("g7WMx"),p=a("5Ml5F"),m=a("7Y5nT");l=new URL(a("dRo73").resolve("bgmjR"),import.meta.url).toString();var h;h=new URL(a("dRo73").resolve("1fsQy"),import.meta.url).toString();var w;w=new URL(a("dRo73").resolve("bWvRY"),import.meta.url).toString();var v;v=new URL(a("dRo73").resolve("9Tcmb"),import.meta.url).toString();var x;x=new URL(a("dRo73").resolve("aX6ps"),import.meta.url).toString();var g;g=new URL(a("dRo73").resolve("ayPb0"),import.meta.url).toString();var j;j=new URL(a("dRo73").resolve("cqsRl"),import.meta.url).toString();var _,b,R,S;_=new URL(a("dRo73").resolve("24uN4"),import.meta.url).toString(),b="B2wDDG_iconButton",R="B2wDDG_disabled",S="B2wDDG_button";const D={onMouseDown:e=>e.stopPropagation(),onMouseMove:e=>e.stopPropagation(),onMouseUp:e=>e.stopPropagation()};p=a("5Ml5F");var H=a("d165e");(0,p.start)().then((e=>{"fail"!==e?(0,H.connect)():document.location.reload()})).catch((()=>{})),(0,i.createRoot)(document.getElementById("root")).render((0,r.jsx)((()=>{const[e,o]=(0,c.useState)(!1),[n,s]=(0,c.useState)({}),[a,i]=(0,c.useState)(""),[H,y]=(0,c.useState)(!1),[N,k]=(0,c.useState)(!1),[E,A]=(0,c.useState)(!1),[C,F]=(0,c.useState)(0),[M,B]=(0,c.useState)(!1),[P,T]=(0,c.useState)(!1),U=(0,c.useRef)(-1),L=()=>{y((e=>!e))},G=()=>{k((e=>!e))},O=t(u)();(0,c.useEffect)((()=>{if(!a&&n?.palette){const e="black"in n?.palette?"black":(Object.keys(n?.palette)||[]).pop();i(e)}}),[a,n]);const Y=()=>{const{hostname:e,protocol:t}=document.location,o=`${t}//${"localhost"===e?"":"api."}${e.replace("www.","")}:8080`;document.location.href=`${o}/auth/twitch`},$=e=>{s(((t={})=>({...t,...e}))),F(Date.now()+e?.countdown),A(e?.isAuthorized)},q=e=>{s(((t={})=>({...t,countdown:e}))),F(Date.now()+e)},W=e=>{"await"!==e||E||(T(!0),clearTimeout(U.current),U.current=setTimeout((()=>{T(!1)}),3e3))},z=e=>{B(e)};return(0,c.useEffect)((()=>(m.default.on("ws:init",$),m.default.on("ws:countdown",q),m.default.on("ws:pix",W),m.default.on("ws:connect",z),()=>{m.default.off("ws:init",$),m.default.off("ws:countdown",q),m.default.off("ws:pix",W),m.default.off("ws:connect",z)})),[E]),(0,r.jsxs)("div",{className:O?"mobile":"",children:[(0,r.jsxs)("div",{className:"B2wDDG_header",...D,children:[E?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"B2wDDG_userName",children:n?.name}),(0,r.jsx)("a",{href:"/logout",className:t(d)({[R]:!M}),children:(0,r.jsx)("img",{src:t(j),className:b})})]}):(0,r.jsx)("a",{href:"/login",className:t(d)({[R]:!M,B2wDDG_blinked:P}),children:(0,r.jsx)("img",{src:t(g),className:b})}),(0,r.jsx)("img",{src:t(x),onClick:L,className:b}),(0,r.jsx)("img",{src:t(_),onClick:G,className:t(d)(b,{[R]:!M})})]}),(0,r.jsx)(f.Canvas,{color:n?.palette?.[a],onClick:(e,t)=>{(0,p.addPix)({x:e,y:t,color:a})},expiration:C,isAuthorized:E}),n?.palette&&(0,r.jsx)(f.Palette,{color:a,colors:n?.palette,setColor:i,expiration:C}),e&&(0,r.jsx)(f.Modal,{onClose:()=>o(!1),children:(0,r.jsxs)("div",{className:"B2wDDG_joinModalContent",children:[(0,r.jsx)("div",{children:"Чтобы присоединиться к PIXEL BATTLE"}),(0,r.jsx)("div",{children:"напиши свой ник на VK Play"}),(0,r.jsx)("div",{children:(0,r.jsx)("input",{type:"text",className:"B2wDDG_input",placeholder:"nickname"})}),(0,r.jsxs)("div",{children:["и отправь в чат стрима ",(0,r.jsx)("span",{className:"B2wDDG_command",children:"!join"})]}),(0,r.jsx)("button",{onClick:()=>{window.open("https://vkplay.live/pixel_battle/only-chat","",`width=500,height=500,left=${window.innerWidth/2-250},top=${window.innerHeight/2-250}`)},className:S,children:"ОТКРЫТЬ ЧАТ"}),(0,r.jsx)("button",{onClick:Y,className:S,children:"Залогинься через Twitch"}),(0,r.jsx)("div",{children:"или"}),(0,r.jsx)("button",{onClick:Y,className:S,children:"Залогинься через ВК"})]})}),(0,r.jsxs)("div",{className:"B2wDDG_footer",...D,children:[(0,r.jsx)("a",{href:"https://vkplay.live/place_tv",target:"_blank",children:(0,r.jsx)("img",{src:t(h)})}),(0,r.jsx)("a",{href:"https://www.twitch.tv/place_ru",target:"_blank",children:(0,r.jsx)("img",{src:t(l)})}),(0,r.jsx)("a",{href:"https://www.youtube.com/@Place-ru",target:"_blank",children:(0,r.jsx)("img",{src:t(w)})}),(0,r.jsx)("a",{href:"https://t.me/pixel_battle_online",target:"_blank",children:(0,r.jsx)("img",{src:t(v)})})]}),H&&(0,r.jsx)(f.Chat,{isAuthorized:E,...D,onClose:L}),N&&(0,r.jsx)(f.Info,{...D,onClose:G})]})}),{}));