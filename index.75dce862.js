function e(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},a={},r=n.parcelRequire8661;null==r&&((r=function(e){if(e in o)return o[e].exports;if(e in a){var t=a[e];delete a[e];var n={id:e,exports:{}};return o[e]=n,t.call(n.exports,n,n.exports),n.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){a[e]=t},n.parcelRequire8661=r),r.register("27Lyk",(function(t,n){var o,a;e(t.exports,"register",(()=>o),(e=>o=e)),e(t.exports,"resolve",(()=>a),(e=>a=e));var r={};o=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)r[t[n]]=e[t[n]]},a=function(e){var t=r[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),r("27Lyk").register(JSON.parse('{"h00hi":"index.75dce862.js","fnnQz":"twitch.9765d80e.svg","6x1ew":"vkplay.1fe42d3c.svg","84mrF":"youtube.11029b0d.svg","fR1wL":"telegram.59b820bd.svg","95Fww":"chat.b83a1653.svg","ivRDV":"login.5d897507.svg","2BOBZ":"logout.a36fbb3d.svg","ikpnG":"index.32deaaae.css","dBIP8":"index.3ddfa709.js"}'));var s=r("ayMG0");r("acw62");var i,l=r("aRPiL"),c=(s=r("ayMG0"),r("acw62")),d=r("8g1PZ"),u=r("fAX6M"),f=r("7rkUU"),w=r("5LNJK"),h=r("im20c");i=new URL(r("27Lyk").resolve("fnnQz"),import.meta.url).toString();var p;p=new URL(r("27Lyk").resolve("6x1ew"),import.meta.url).toString();var m;m=new URL(r("27Lyk").resolve("84mrF"),import.meta.url).toString();var x;x=new URL(r("27Lyk").resolve("fR1wL"),import.meta.url).toString();var v;v=new URL(r("27Lyk").resolve("95Fww"),import.meta.url).toString();var g;g=new URL(r("27Lyk").resolve("ivRDV"),import.meta.url).toString();var j,_,b,k;j=new URL(r("27Lyk").resolve("2BOBZ"),import.meta.url).toString(),_="B2wDDG_iconButton",b="B2wDDG_button",k="B2wDDG_disabled";const y={onMouseDown:e=>e.stopPropagation(),onMouseMove:e=>e.stopPropagation(),onMouseUp:e=>e.stopPropagation()};w=r("5LNJK");var D=r("ksj8G");(0,w.start)().then((e=>{"fail"!==e?(0,D.connect)():document.location.reload()})).catch((()=>{})),(0,l.createRoot)(document.getElementById("root")).render((0,s.jsx)((()=>{const[e,n]=(0,c.useState)(!1),[o,a]=(0,c.useState)({}),[r,l]=(0,c.useState)(""),[D,S]=(0,c.useState)(!1),[R,L]=(0,c.useState)(!1),[H,N]=(0,c.useState)(!1),[B,E]=(0,c.useState)(0),[F,A]=(0,c.useState)(!1),[G,C]=(0,c.useState)(!1),P=(0,c.useRef)(-1),U=t(u)();(0,c.useEffect)((()=>{if(!r&&o?.palette){const e="black"in o?.palette?"black":(Object.keys(o?.palette)||[]).pop();l(e)}}),[r,o]);const M=()=>{const{hostname:e,protocol:t}=document.location,n=`${t}//${"localhost"===e?"":"api."}${e.replace("www.","")}:8080`;document.location.href=`${n}/auth/twitch`},O=e=>{a(((t={})=>({...t,...e}))),E(Date.now()+e?.countdown),N(e?.isAuthorized)},T=e=>{a(((t={})=>({...t,countdown:e}))),E(Date.now()+e)},$=e=>{"await"!==e||H||(C(!0),clearTimeout(P.current),P.current=setTimeout((()=>{C(!1)}),3e3))},z=e=>{A(e)};return(0,c.useEffect)((()=>(h.default.on("ws:init",O),h.default.on("ws:countdown",T),h.default.on("ws:pix",$),h.default.on("ws:connect",z),()=>{h.default.off("ws:init",O),h.default.off("ws:countdown",T),h.default.off("ws:pix",$),h.default.off("ws:connect",z)})),[H]),(0,s.jsxs)("div",{className:U?"mobile":"",children:[(0,s.jsxs)("div",{className:"B2wDDG_header",...y,children:[H?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"B2wDDG_userName",children:o?.name}),(0,s.jsx)("a",{href:"/logout",className:t(d)({[k]:!F}),children:(0,s.jsx)("img",{src:t(j),className:_})})]}):(0,s.jsx)("a",{href:"/login",className:t(d)({[k]:!F,B2wDDG_blinked:G}),children:(0,s.jsx)("img",{src:t(g),className:_})}),(0,s.jsx)("img",{src:t(v),onClick:()=>{S((e=>!e))},className:_})]}),(0,s.jsx)(f.Canvas,{color:o?.palette?.[r],onClick:(e,t)=>{(0,w.addPix)({x:e,y:t,color:r})},expiration:B,isAuthorized:H}),o?.palette&&(0,s.jsx)(f.Palette,{color:r,colors:o?.palette,setColor:l,expiration:B}),e&&(0,s.jsx)(f.Modal,{onClose:()=>n(!1),children:(0,s.jsxs)("div",{className:"B2wDDG_joinModalContent",children:[(0,s.jsx)("div",{children:"Чтобы присоединиться к PIXEL BATTLE"}),(0,s.jsx)("div",{children:"напиши свой ник на VK Play"}),(0,s.jsx)("div",{children:(0,s.jsx)("input",{type:"text",className:"B2wDDG_input",placeholder:"nickname"})}),(0,s.jsxs)("div",{children:["и отправь в чат стрима ",(0,s.jsx)("span",{className:"B2wDDG_command",children:"!join"})]}),(0,s.jsx)("button",{onClick:()=>{window.open("https://vkplay.live/pixel_battle/only-chat","",`width=500,height=500,left=${window.innerWidth/2-250},top=${window.innerHeight/2-250}`)},className:b,children:"ОТКРЫТЬ ЧАТ"}),(0,s.jsx)("button",{onClick:M,className:b,children:"Залогинься через Twitch"}),(0,s.jsx)("div",{children:"или"}),(0,s.jsx)("button",{onClick:M,className:b,children:"Залогинься через ВК"})]})}),(0,s.jsxs)("div",{className:"B2wDDG_footer",...y,children:[(0,s.jsx)("a",{href:"https://vkplay.live/place_tv",target:"_blank",children:(0,s.jsx)("img",{src:t(p)})}),(0,s.jsx)("a",{href:"https://www.twitch.tv/place_ru",target:"_blank",children:(0,s.jsx)("img",{src:t(i)})}),(0,s.jsx)("a",{href:"https://www.youtube.com/@Place-ru",target:"_blank",children:(0,s.jsx)("img",{src:t(m)})}),(0,s.jsx)("a",{href:"https://t.me/pixel_battle_online",target:"_blank",children:(0,s.jsx)("img",{src:t(x)})})]}),D&&(0,s.jsx)(f.Chat,{isAuthorized:H,...y}),R&&(0,s.jsx)(f.Info,{...y})]})}),{}));
//# sourceMappingURL=index.75dce862.js.map
