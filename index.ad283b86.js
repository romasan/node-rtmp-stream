function e(e){return e&&e.__esModule?e.default:e}var t,a,r=globalThis,s={},n={},o=r.parcelRequire8661;null==o&&((o=function(e){if(e in s)return s[e].exports;if(e in n){var t=n[e];delete n[e];var a={id:e,exports:{}};return s[e]=a,t.call(a.exports,a,a.exports),a.exports}var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){n[e]=t},r.parcelRequire8661=o),(0,o.register)("dRo73",function(e,t){Object.defineProperty(e.exports,"register",{get:()=>a,set:e=>a=e,enumerable:!0,configurable:!0});var a,r=new Map;a=function(e,t){for(var a=0;a<t.length-1;a+=2)r.set(t[a],{baseUrl:e,path:t[a+1]})}}),o("dRo73").register(new URL("",import.meta.url).toString(),JSON.parse('["aRmpQ","index.ad283b86.js","gdQMQ","twitch.9765d80e.svg","9IwAj","vkplay.1fe42d3c.svg","5Moo1","youtube.11029b0d.svg","huxR7","discord.637209af.svg","8rEZm","telegram.59b820bd.svg","4MUje","chat.b83a1653.svg","58ys0","login.5d897507.svg","lBm7B","logout.a36fbb3d.svg","jdOH6","info.1855216b.svg","9M2pu","index.c69ebf75.css","kVOk8","index.0688ac1d.js","9M2pu","index.c69ebf75.css","6mMn4","index.runtime.12166a52.js"]'));var i=o("iM5HV");o("fYo6y");var l=o("b2S2j"),i=o("iM5HV"),c=o("fYo6y"),d=o("PTcTU"),f=o("fvstS"),u=o("g7WMx"),g=o("5Ml5F"),_=o("7Y5nT"),m={};m=new URL("twitch.9765d80e.svg",import.meta.url).toString();var p={};p=new URL("vkplay.1fe42d3c.svg",import.meta.url).toString();var b={};b=new URL("youtube.11029b0d.svg",import.meta.url).toString();var h={};h=new URL("discord.637209af.svg",import.meta.url).toString();var x={};x=new URL("telegram.59b820bd.svg",import.meta.url).toString();var v={};v=new URL("chat.b83a1653.svg",import.meta.url).toString();var w={};w=new URL("login.5d897507.svg",import.meta.url).toString();var H={};H=new URL("logout.a36fbb3d.svg",import.meta.url).toString();var S={};S=new URL("info.1855216b.svg",import.meta.url).toString(),t="B2wDDG_disabled",a="B2wDDG_iconButton";const j={onMouseDown:e=>e.stopPropagation(),onMouseMove:e=>e.stopPropagation(),onMouseUp:e=>e.stopPropagation()},R=()=>{let[r,s]=(0,c.useState)({name:"",palette:null}),[n,o]=(0,c.useState)(""),[l,R]=(0,c.useState)(!1),[E,D]=(0,c.useState)(!1),[F,A]=(0,c.useState)(!1),[M,k]=(0,c.useState)(0),[N,B]=(0,c.useState)(!1),[L,U]=(0,c.useState)(!1),[y,C]=(0,c.useState)(0),[T,G]=(0,c.useState)(!1),[O,P]=(0,c.useState)(!1),I=(0,c.useRef)(-1),V=()=>{P(!1),R(e=>!e)},Y=()=>{D(e=>!e)},z=/*@__PURE__*/e(f)();(0,c.useEffect)(()=>{if(!n&&r.palette&&r.palette){let e="black"in r.palette?"black":(Object.keys(r.palette)||[]).pop();o(e)}},[n,r]),(0,c.useEffect)(()=>{if(y){let e=setInterval(()=>{y<=Date.now()&&(G(!0),clearInterval(e))},1e3);return()=>{clearInterval(e)}}},[y]);let Q=e=>{s((t={})=>({...t,...e})),k(Date.now()+e.countdown),A(e.isAuthorized),"newer"!==e.finish&&C(Date.now()+e.finish)},q=e=>{s((t={})=>({...t,countdown:e})),k(Date.now()+e)},W=e=>{"await"!==e||F||(U(!0),clearTimeout(I.current),I.current=setTimeout(()=>{U(!1)},3e3))},J=e=>{B(e)},K=e=>{r.name&&e.text.indexOf(`@${r.name}`)>=0&&P(!0)};return(0,c.useEffect)(()=>((0,_.default).on("ws:init",Q),(0,_.default).on("ws:countdown",q),(0,_.default).on("pix",W),(0,_.default).on("ws:connect",J),(0,_.default).on("ws:chatMessage",K),()=>{(0,_.default).off("ws:init",Q),(0,_.default).off("ws:countdown",q),(0,_.default).off("pix",W),(0,_.default).off("ws:connect",J)}),[F]),/*#__PURE__*/(0,i.jsxs)("div",{className:/*@__PURE__*/e(d)("B2wDDG_root",{mobile:z}),children:[/*#__PURE__*/(0,i.jsxs)("div",{className:"B2wDDG_header",...j,children:[/*#__PURE__*/(0,i.jsxs)("div",{className:"B2wDDG_title",children:[/*#__PURE__*/(0,i.jsx)("h1",{children:"PIXEL BATTLE"}),/*#__PURE__*/(0,i.jsx)("h2",{children:"Пиксель батл 2023 S1E2"})]}),/*#__PURE__*/(0,i.jsxs)("div",{className:"B2wDDG_controls",children:[F?/*#__PURE__*/(0,i.jsxs)(i.Fragment,{children:[/*#__PURE__*/(0,i.jsx)("div",{className:"B2wDDG_userName",children:r.name}),/*#__PURE__*/(0,i.jsx)("a",{href:"/logout",className:/*@__PURE__*/e(d)({[t]:!N}),children:/*#__PURE__*/(0,i.jsx)("img",{src:/*@__PURE__*/e(H),className:a,alt:"Выход"})})]}):/*#__PURE__*/(0,i.jsx)("a",{href:"/login",className:/*@__PURE__*/e(d)({[t]:!N,B2wDDG_blinked:L}),children:/*#__PURE__*/(0,i.jsx)("img",{src:/*@__PURE__*/e(w),className:a,alt:"Авторизация"})}),/*#__PURE__*/(0,i.jsx)("span",{className:/*@__PURE__*/e(d)("B2wDDG_iconWrapper",{B2wDDG_badge:O&&!l}),children:/*#__PURE__*/(0,i.jsx)("img",{src:/*@__PURE__*/e(v),onClick:V,className:a,alt:"Чат"})}),/*#__PURE__*/(0,i.jsx)("img",{src:/*@__PURE__*/e(S),onClick:Y,className:/*@__PURE__*/e(d)(a,{[t]:!N}),alt:"Статистика"})]})]}),/*#__PURE__*/(0,i.jsx)(u.Canvas,{color:r.palette?r.palette[n]:"",onClick:(e,t)=>{(0,g.addPix)({x:e,y:t,color:n})},expiration:M,isAuthorized:F,isFinished:T,isOnline:N}),r.palette&&!T&&/*#__PURE__*/(0,i.jsx)(u.Palette,{color:n,colors:r.palette,setColor:o,expiration:M}),!!y&&/*#__PURE__*/(0,i.jsx)(u.Countdown,{finish:y,text:r.finishText}),/*#__PURE__*/(0,i.jsxs)("div",{className:"B2wDDG_footer",...j,children:[/*#__PURE__*/(0,i.jsx)("a",{href:"https://vkplay.live/place_tv",target:"_blank",rel:"noreferrer",children:/*#__PURE__*/(0,i.jsx)("img",{src:/*@__PURE__*/e(p),alt:"Стрим в VKPlay Live"})}),/*#__PURE__*/(0,i.jsx)("a",{href:"https://www.twitch.tv/place_ru",target:"_blank",rel:"noreferrer",children:/*#__PURE__*/(0,i.jsx)("img",{src:/*@__PURE__*/e(m),alt:"Стрим в Twitch"})}),/*#__PURE__*/(0,i.jsx)("a",{href:"https://www.youtube.com/@Place-ru",target:"_blank",rel:"noreferrer",children:/*#__PURE__*/(0,i.jsx)("img",{src:/*@__PURE__*/e(b),alt:"Записи таймпапс в Youtube"})}),/*#__PURE__*/(0,i.jsx)("a",{href:"https://discord.gg/FfVjurYrus",target:"_blank",rel:"noreferrer",children:/*#__PURE__*/(0,i.jsx)("img",{src:/*@__PURE__*/e(h),alt:"Discord сервер пиксель батла"})}),/*#__PURE__*/(0,i.jsx)("a",{href:"https://t.me/pixel_battle_online",target:"_blank",rel:"noreferrer",children:/*#__PURE__*/(0,i.jsx)("img",{src:/*@__PURE__*/e(x),alt:"Telegram канал пиксель батла"})})]}),l&&/*#__PURE__*/(0,i.jsx)(u.Chat,{isAuthorized:F,nickname:r.name,onClose:V,...j}),E&&/*#__PURE__*/(0,i.jsx)(u.Info,{...j,onClose:Y})]})};var g=o("5Ml5F"),E=o("d165e");(0,g.start)().then(e=>{if("fail"===e){document.location.reload();return}(0,E.connect)()}).catch(()=>{});const D=document.getElementById("root");document.addEventListener("DOMContentLoaded",()=>{D.hasChildNodes()?(0,l.hydrateRoot)(D,/*#__PURE__*/(0,i.jsx)(R,{})):(0,l.createRoot)(D).render(/*#__PURE__*/(0,i.jsx)(R,{}))});