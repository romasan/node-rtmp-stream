var e=globalThis,r={},t={},a=e.parcelRequire8661;null==a&&((a=function(e){if(e in r)return r[e].exports;if(e in t){var a=t[e];delete t[e];var s={id:e,exports:{}};return r[e]=s,a.call(s.exports,s,s.exports),s.exports}var o=Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,r){t[e]=r},e.parcelRequire8661=a),a.register;var s=a("iM5HV");a("fYo6y");var o=a("b2S2j"),s=a("iM5HV"),i=a("fYo6y"),l=a("PTcTU"),n=a("g7WMx"),c=a("ifBWf"),d=a("5Ml5F"),h=a("7Y5nT"),u=a("cu5bI"),f=a("gpLKe"),x=a("2tSK0"),s=a("iM5HV");a("fYo6y");var v=e=>(0,s.jsxs)("svg",{viewBox:"0 0 39 39",width:40,height:40,xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,s.jsx)("path",{d:"M20.319 0C29.133 0 33.54 0 36.27 2.73 39 5.46 39 9.867 39 18.681v1.638c0 8.814 0 13.221-2.73 15.951C33.54 39 29.133 39 20.319 39h-1.638C9.867 39 5.46 39 2.73 36.27 0 33.54 0 29.133 0 20.32v-1.64C0 9.866 0 5.46 2.73 2.73 5.46 0 9.867 0 18.681 0h1.638z",fill:"rgba(0,119,255,1)"}),(0,s.jsx)("path",{d:"M.117 10.96C0 13.064 0 15.6 0 18.68v1.638c0 2.34 0 4.33.039 6.084C5.148 28.9 12.012 30.42 19.5 30.42c7.488 0 14.352-1.52 19.461-4.017C39 24.648 39 22.62 39 20.32v-1.638c0-3.08 0-5.616-.117-7.76H.117v.038z",fill:"rgba(0,9,180,1)"}),(0,s.jsx)("circle",{cx:27.105,cy:19.695,stroke:"rgba(255,255,255,1)",fill:"rgba(0,9,180,1)",strokeWidth:3.897,r:3.705}),(0,s.jsx)("path",{d:"M16.38 24.18 7.8 15.6m8.58 0L7.8 24.18",stroke:"rgba(255,255,255,1)",strokeWidth:3.897})]}),s=a("iM5HV");a("fYo6y");var g=e=>(0,s.jsxs)("svg",{viewBox:"0 0 30 20",width:40,height:40,xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,s.jsx)("path",{d:"M27.973 3.123A3.578 3.578 0 0 0 25.447.597C23.22 0 14.285 0 14.285 0S5.35 0 3.123.597A3.578 3.578 0 0 0 .597 3.123C0 5.35 0 10 0 10s0 4.65.597 6.877a3.578 3.578 0 0 0 2.526 2.526C5.35 20 14.285 20 14.285 20s8.935 0 11.162-.597a3.578 3.578 0 0 0 2.526-2.526C28.57 14.65 28.57 10 28.57 10s-.002-4.65-.597-6.877Z",fill:"red"}),(0,s.jsx)("path",{d:"M11.425 14.285 18.848 10l-7.423-4.285v8.57Z",fill:"rgba(255,255,255,1)"})]}),p=a("dGUD3"),w=a("2AwaF"),j=a("i63ZM"),m=a("hasHI"),d=a("5Ml5F"),b=a("d165e");(0,d.start)().then(e=>{if("fail"===e){document.location.reload();return}(0,b.connect)(e)}).catch(()=>{});const C=document.getElementById("root");(0,o.createRoot)(C).render((0,s.jsx)(()=>{let[e,r]=(0,i.useState)(""),[t,a]=(0,i.useState)(""),[o,b]=(0,i.useState)(!1),[C,M]=(0,i.useState)(!1),[S,k]=(0,i.useState)({}),E=(0,i.useRef)(-1),{wsStore:_,isAuthorized:I,expiration:L,isOnline:y,finish:T,hasNewMessage:D,role:A,paused:H,setHasNewMessage:P}=(0,u.useWsStore)(),N=(0,f.useMobileLayout)(),O=(0,m.useModal)({content:(0,s.jsx)(n.Login,{}),width:"300px"}),[z,K]=(0,i.useState)("CLICK"),B=j.colorSchemes[_.canvas&&_.canvas.colorScheme]||{};(0,i.useEffect)(()=>{let t="truecolor"===(_&&_.canvas&&_.canvas.colorScheme);if(!e&&B){let e="black"in B&&!t?"black":t?(Object.values(B)||[]).pop():(Object.keys(B)||[]).pop();e&&r(e)}},[e,_]),(0,i.useEffect)(()=>{if(T){let e=setInterval(()=>{T<=Date.now()&&(M(!0),clearInterval(e))},1e3);return()=>{clearInterval(e)}}},[T]);let F=e=>{"await"!==e||I||(b(!0),clearTimeout(E.current),E.current=setTimeout(()=>{b(!1)},3e3))};return(0,i.useEffect)(()=>((0,h.default).on("pix",F),()=>{(0,h.default).off("pix",F)}),[I]),(0,i.useEffect)(()=>(0,c.doOnEnter)("life",()=>{(0,c.life)(S.image)}),[S]),(0,i.useEffect)(()=>{let e=()=>{S&&S.centering()};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[S]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:(l&&l.__esModule?l.default:l)("B2wDDG_root",{mobile:N}),children:[(0,s.jsx)(n.HeaderLogo,{}),(0,s.jsx)(n.HeaderControls,{isAuthorized:I,name:_?_.name:"",isOnline:y,hasNewMessage:D,setHasNewMessage:P,blinkedLoginAnimation:o,role:A,login:O.open}),(0,s.jsx)(n.Canvas,{mode:z,color:_.canvas&&"truecolor"===_.canvas.colorScheme?e:B[e],expand:_.canvas,onClick:(r,t)=>{if(z===n.EMode.PICK){a(r),K(n.EMode.CLICK);return}_.needAuthorize&&!I?setTimeout(()=>{O.open()},100):(0,d.addPix)({x:r,y:t,color:e})},expiration:L,isAuthorized:I,isFinished:C,isOnline:y,onInit:k,src:`${d.APIhost}/canvas.png`}),y&&!C&&(0,s.jsx)(n.Palette,{color:e,pickedColor:t,colorScheme:_.canvas&&_.canvas.colorScheme,setColor:r,onPick:(e=!0)=>{K(e?n.EMode.PICK:n.EMode.CLICK)}}),!!T&&(0,s.jsx)(n.Countdown,{finish:T,text:_.finishText}),H&&(0,s.jsx)("div",{className:"B2wDDG_paused",children:"PAUSE ||"}),(0,s.jsxs)("div",{className:"B2wDDG_footer",children:[(0,s.jsx)("a",{href:"https://vkplay.live/place_tv",target:"_blank",rel:"noreferrer","aria-label":"Стрим на VK Play Live",children:(0,s.jsx)(v,{})}),(0,s.jsx)("a",{href:"https://www.twitch.tv/place_ru",target:"_blank",rel:"noreferrer","aria-label":"Стрим на Twitch",children:(0,s.jsx)(x.default,{})}),(0,s.jsx)("a",{href:"https://www.youtube.com/@Place-ru",target:"_blank",rel:"noreferrer","aria-label":"Стрим на Twitch",children:(0,s.jsx)(g,{})}),(0,s.jsx)("a",{href:"https://discord.gg/FfVjurYrus",target:"_blank",rel:"noreferrer","aria-label":"Discord сервер пиксель батла",children:(0,s.jsx)(p.default,{})}),(0,s.jsx)("a",{href:"https://t.me/pixel_battle_online",target:"_blank",rel:"noreferrer","aria-label":"Telegram канал пиксель батла",children:(0,s.jsx)(w.default,{})})]})]}),O.render()]})},{}));