function e(e){return e&&e.__esModule?e.default:e}var t,a,r=globalThis,s={},n={},o=r.parcelRequire8661;null==o&&((o=function(e){if(e in s)return s[e].exports;if(e in n){var t=n[e];delete n[e];var a={id:e,exports:{}};return s[e]=a,t.call(a.exports,a,a.exports),a.exports}var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){n[e]=t},r.parcelRequire8661=o),(0,o.register)("dRo73",function(e,t){Object.defineProperty(e.exports,"register",{get:()=>a,set:e=>a=e,enumerable:!0,configurable:!0});var a,r=new Map;a=function(e,t){for(var a=0;a<t.length-1;a+=2)r.set(t[a],{baseUrl:e,path:t[a+1]})}}),o("dRo73").register(new URL("",import.meta.url).toString(),JSON.parse('["aRmpQ","index.df17b8ca.js","bgmjR","twitch.9765d80e.svg","1fsQy","vkplay.1fe42d3c.svg","bWvRY","youtube.11029b0d.svg","6RFDI","discord.637209af.svg","9Tcmb","telegram.59b820bd.svg","aX6ps","chat.b83a1653.svg","ayPb0","login.5d897507.svg","cqsRl","logout.a36fbb3d.svg","24uN4","info.1855216b.svg","9M2pu","index.6f2eec44.css","kVOk8","index.659034ca.js","9M2pu","index.6f2eec44.css","6mMn4","index.runtime.a7db87c4.js"]'));var i=o("iM5HV");o("fYo6y");var l=o("b2S2j"),i=o("iM5HV"),c=o("fYo6y"),d=o("PTcTU"),f=o("fvstS"),u=o("g7WMx"),g=o("5Ml5F"),_=o("7Y5nT"),m={};m=new URL("twitch.9765d80e.svg",import.meta.url).toString();var p={};p=new URL("vkplay.1fe42d3c.svg",import.meta.url).toString();var h={};h=new URL("youtube.11029b0d.svg",import.meta.url).toString();var v={};v=new URL("discord.637209af.svg",import.meta.url).toString();var x={};x=new URL("telegram.59b820bd.svg",import.meta.url).toString();var w={};w=new URL("chat.b83a1653.svg",import.meta.url).toString();var H={};H=new URL("login.5d897507.svg",import.meta.url).toString();var S={};S=new URL("logout.a36fbb3d.svg",import.meta.url).toString();var R={};R=new URL("info.1855216b.svg",import.meta.url).toString(),t="B2wDDG_disabled",a="B2wDDG_iconButton";const b={onMouseDown:e=>e.stopPropagation(),onMouseMove:e=>e.stopPropagation(),onMouseUp:e=>e.stopPropagation()},j=()=>{let[r,s]=(0,c.useState)({name:"",palette:null}),[n,o]=(0,c.useState)(""),[l,j]=(0,c.useState)(!1),[E,D]=(0,c.useState)(!1),[F,A]=(0,c.useState)(!1),[N,k]=(0,c.useState)(0),[M,y]=(0,c.useState)(!1),[L,U]=(0,c.useState)(!1),[B,T]=(0,c.useState)(0),[C,G]=(0,c.useState)(!1),[P,O]=(0,c.useState)(!1),I=(0,c.useRef)(-1),Y=()=>{O(!1),j(e=>!e)},V=()=>{D(e=>!e)},q=/*@__PURE__*/e(f)();(0,c.useEffect)(()=>{if(!n&&r.palette&&r.palette){let e="black"in r.palette?"black":(Object.keys(r.palette)||[]).pop();o(e)}},[n,r]),(0,c.useEffect)(()=>{if(B){let e=setInterval(()=>{B<=Date.now()&&(G(!0),clearInterval(e))},1e3);return()=>{clearInterval(e)}}},[B]);let z=e=>{s((t={})=>({...t,...e})),k(Date.now()+e.countdown),A(e.isAuthorized),"newer"!==e.finish&&T(Date.now()+e.finish)},W=e=>{s((t={})=>({...t,countdown:e})),k(Date.now()+e)},Q=e=>{"await"!==e||F||(U(!0),clearTimeout(I.current),I.current=setTimeout(()=>{U(!1)},3e3))},X=e=>{y(e)},J=e=>{r.name&&e.text.indexOf(`@${r.name}`)>=0&&O(!0)};return(0,c.useEffect)(()=>((0,_.default).on("ws:init",z),(0,_.default).on("ws:countdown",W),(0,_.default).on("pix",Q),(0,_.default).on("ws:connect",X),(0,_.default).on("ws:chatMessage",J),()=>{(0,_.default).off("ws:init",z),(0,_.default).off("ws:countdown",W),(0,_.default).off("pix",Q),(0,_.default).off("ws:connect",X)}),[F]),/*#__PURE__*/(0,i.jsxs)("div",{className:/*@__PURE__*/e(d)("B2wDDG_root",{mobile:q}),children:[/*#__PURE__*/(0,i.jsxs)("div",{className:"B2wDDG_header",...b,children:[/*#__PURE__*/(0,i.jsxs)("div",{className:"B2wDDG_title",children:[/*#__PURE__*/(0,i.jsx)("h1",{children:"PIXEL BATTLE"}),/*#__PURE__*/(0,i.jsx)("h2",{children:"Пиксель батл 2023 S1E2"})]}),/*#__PURE__*/(0,i.jsxs)("div",{className:"B2wDDG_controls",children:[F?/*#__PURE__*/(0,i.jsxs)(i.Fragment,{children:[/*#__PURE__*/(0,i.jsx)("div",{className:"B2wDDG_userName",children:r.name}),/*#__PURE__*/(0,i.jsx)("a",{href:"/logout",className:/*@__PURE__*/e(d)({[t]:!M}),children:/*#__PURE__*/(0,i.jsx)("img",{src:/*@__PURE__*/e(S),className:a,alt:"Выход"})})]}):/*#__PURE__*/(0,i.jsx)("a",{href:"/login",className:/*@__PURE__*/e(d)({[t]:!M,B2wDDG_blinked:L}),children:/*#__PURE__*/(0,i.jsx)("img",{src:/*@__PURE__*/e(H),className:a,alt:"Авторизация"})}),/*#__PURE__*/(0,i.jsx)("span",{className:/*@__PURE__*/e(d)("B2wDDG_iconWrapper",{B2wDDG_badge:P&&!l}),children:/*#__PURE__*/(0,i.jsx)("img",{src:/*@__PURE__*/e(w),onClick:Y,className:a,alt:"Чат"})}),/*#__PURE__*/(0,i.jsx)("img",{src:/*@__PURE__*/e(R),onClick:V,className:/*@__PURE__*/e(d)(a,{[t]:!M}),alt:"Статистика"})]})]}),/*#__PURE__*/(0,i.jsx)(u.Canvas,{color:r.palette?r.palette[n]:"",onClick:(e,t)=>{(0,g.addPix)({x:e,y:t,color:n})},expiration:N,isAuthorized:F,isFinished:C,isOnline:M}),r.palette&&!C&&/*#__PURE__*/(0,i.jsx)(u.Palette,{color:n,colors:r.palette,setColor:o,expiration:N}),!!B&&/*#__PURE__*/(0,i.jsx)(u.Countdown,{finish:B,text:r.finishText}),/*#__PURE__*/(0,i.jsxs)("div",{className:"B2wDDG_footer",...b,children:[/*#__PURE__*/(0,i.jsx)("a",{href:"https://vkplay.live/place_tv",target:"_blank",rel:"noreferrer",children:/*#__PURE__*/(0,i.jsx)("img",{src:/*@__PURE__*/e(p),alt:"Стрим в VKPlay Live"})}),/*#__PURE__*/(0,i.jsx)("a",{href:"https://www.twitch.tv/place_ru",target:"_blank",rel:"noreferrer",children:/*#__PURE__*/(0,i.jsx)("img",{src:/*@__PURE__*/e(m),alt:"Стрим в Twitch"})}),/*#__PURE__*/(0,i.jsx)("a",{href:"https://www.youtube.com/@Place-ru",target:"_blank",rel:"noreferrer",children:/*#__PURE__*/(0,i.jsx)("img",{src:/*@__PURE__*/e(h),alt:"Записи таймпапс в Youtube"})}),/*#__PURE__*/(0,i.jsx)("a",{href:"https://discord.gg/FfVjurYrus",target:"_blank",rel:"noreferrer",children:/*#__PURE__*/(0,i.jsx)("img",{src:/*@__PURE__*/e(v),alt:"Discord сервер пиксель батла"})}),/*#__PURE__*/(0,i.jsx)("a",{href:"https://t.me/pixel_battle_online",target:"_blank",rel:"noreferrer",children:/*#__PURE__*/(0,i.jsx)("img",{src:/*@__PURE__*/e(x),alt:"Telegram канал пиксель батла"})})]}),l&&/*#__PURE__*/(0,i.jsx)(u.Chat,{isAuthorized:F,nickname:r.name,onClose:Y,...b}),E&&/*#__PURE__*/(0,i.jsx)(u.Info,{...b,onClose:V})]})};var g=o("5Ml5F"),E=o("d165e");(0,g.start)().then(e=>{if("fail"===e){document.location.reload();return}(0,E.connect)()}).catch(()=>{});const D=document.getElementById("root");document.addEventListener("DOMContentLoaded",()=>{D.hasChildNodes()?(0,l.hydrateRoot)(D,/*#__PURE__*/(0,i.jsx)(j,{})):(0,l.createRoot)(D).render(/*#__PURE__*/(0,i.jsx)(j,{}))});