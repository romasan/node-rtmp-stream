function e(e,t,a,s){Object.defineProperty(e,t,{get:a,set:s,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s={},n={},o=a.parcelRequire8661;null==o&&((o=function(e){if(e in s)return s[e].exports;if(e in n){var t=n[e];delete n[e];var a={id:e,exports:{}};return s[e]=a,t.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){n[e]=t},a.parcelRequire8661=o),o.register("27Lyk",(function(t,a){var s,n;e(t.exports,"register",(()=>s),(e=>s=e)),e(t.exports,"resolve",(()=>n),(e=>n=e));var o={};s=function(e){for(var t=Object.keys(e),a=0;a<t.length;a++)o[t[a]]=e[t[a]]},n=function(e){var t=o[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),o("27Lyk").register(JSON.parse('{"h00hi":"index.ade3f2e0.js","i6uYg":"twitch.9765d80e.svg","lORw5":"vkplay.1fe42d3c.svg","72mLQ":"youtube.11029b0d.svg","bcdFL":"telegram.59b820bd.svg","lcOom":"login.822f9667.svg","9fS6N":"logout.cd3f8ebf.svg","ikpnG":"index.64168ff8.css","51cyv":"index.f962b635.js"}'));var i=o("ayMG0");o("acw62");var l=o("aRPiL"),r=(i=o("ayMG0"),o("acw62")),c=o("8g1PZ"),d=o("fAX6M");o("7Iabx"),o("iWcyK");i=o("ayMG0");o("acw62");var h=o("1D3Re");const u=({})=>{const{anchorRef:e,draggableRef:t}=(0,h.useDraggable)({x:document.body.offsetWidth-380,y:10});return(0,i.jsxs)("div",{className:"E3mhTa_root",ref:t,children:[(0,i.jsx)("div",{className:"E3mhTa_draggable",ref:e}),(0,i.jsxs)("div",{className:"E3mhTa_content",children:[(0,i.jsx)("div",{children:"FOO"}),(0,i.jsx)("div",{children:"BAR"}),(0,i.jsx)("div",{children:"BUZ"}),(0,i.jsx)("div",{children:"akdjfhl ajhdf lkajsdhf lkjasdhf lkajsdhf lkajsdhf lkajdshf lkajsdhf lakjsdhf laksjdhf lkasjdhf lkasjhdf lkajsf "})]}),(0,i.jsx)("div",{children:(0,i.jsx)("input",{type:"text"})})]})};i=o("ayMG0");o("acw62");i=o("ayMG0");o("acw62");const f=({children:e,onClose:t,width:a="500px",height:s="350px"})=>(0,i.jsx)("div",{className:"i0np6q_root",children:(0,i.jsxs)("div",{className:"i0np6q_window",style:{width:a,height:s},children:[(0,i.jsx)("div",{className:"i0np6q_close",onClick:t,children:"×"}),e]})});o("7SRiy");var w,p=o("iWcyK"),x=o("7SRiy"),m=o("5LNJK"),j=o("im20c");w=new URL(o("27Lyk").resolve("i6uYg"),import.meta.url).toString();var v;v=new URL(o("27Lyk").resolve("lORw5"),import.meta.url).toString();var g;g=new URL(o("27Lyk").resolve("72mLQ"),import.meta.url).toString();var _;_=new URL(o("27Lyk").resolve("bcdFL"),import.meta.url).toString();var b;b=new URL(o("27Lyk").resolve("lcOom"),import.meta.url).toString();var k,y,N,R;k=new URL(o("27Lyk").resolve("9fS6N"),import.meta.url).toString(),y="B2wDDG_button",N="B2wDDG_iconButton",R="B2wDDG_disabled";const S={onMouseDown:e=>e.stopPropagation(),onMouseMove:e=>e.stopPropagation(),onMouseUp:e=>e.stopPropagation()};m=o("5LNJK");var D=o("ksj8G");(0,m.start)().then((e=>{"fail"!==e?(0,D.connect)():document.location.reload()})).catch((()=>{})),(0,l.createRoot)(document.getElementById("root")).render((0,i.jsx)((()=>{const[e,a]=(0,r.useState)(!1),[s,n]=(0,r.useState)({}),[o,l]=(0,r.useState)(""),[h,D]=(0,r.useState)(!1),[L,E]=(0,r.useState)(!1),[H,G]=(0,r.useState)(0),[B,A]=(0,r.useState)(!1),[F,M]=(0,r.useState)(!1),O=(0,r.useRef)(-1),C=t(d)();(0,r.useEffect)((()=>{if(!o&&s?.palette){const e="black"in s?.palette?"black":(Object.keys(s?.palette)||[]).pop();l(e)}}),[o,s]);const P=()=>{const{hostname:e,protocol:t}=document.location,a=`${t}//${"localhost"===e?"":"api."}${e.replace("www.","")}:8080`;document.location.href=`${a}/auth/twitch`},T=e=>{n(((t={})=>({...t,...e}))),G(Date.now()+e?.countdown),E(e?.isAuthorized)},U=e=>{n(((t={})=>({...t,countdown:e}))),G(Date.now()+e)},$=e=>{"await"!==e||L||(M(!0),clearTimeout(O.current),O.current=setTimeout((()=>{M(!1)}),3e3))},q=e=>{A(e)};return(0,r.useEffect)((()=>(j.default.on("ws:init",T),j.default.on("ws:countdown",U),j.default.on("ws:pix",$),j.default.on("ws:connect",q),()=>{j.default.off("ws:init",T),j.default.off("ws:countdown",U),j.default.off("ws:pix",$),j.default.off("ws:connect",q)})),[L]),(0,i.jsxs)("div",{className:C?"mobile":"",children:[(0,i.jsx)("div",{className:"B2wDDG_header",...S,children:L?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"B2wDDG_userName",children:s?.name}),(0,i.jsx)("a",{href:"/logout",className:t(c)({[R]:!B}),children:(0,i.jsx)("img",{src:t(k),className:N})})]}):(0,i.jsx)("a",{href:"/login",className:t(c)({[R]:!B,B2wDDG_blinked:F}),children:(0,i.jsx)("img",{src:t(b),className:N})})}),(0,i.jsx)(p.Canvas,{color:s?.palette?.[o],onClick:(e,t)=>{(0,m.addPix)({x:e,y:t,color:o})},expiration:H,isAuthorized:L}),s?.palette&&(0,i.jsx)(x.Palette,{color:o,colors:s?.palette,setColor:l,expiration:H}),e&&(0,i.jsx)(f,{onClose:()=>a(!1),children:(0,i.jsxs)("div",{className:"B2wDDG_joinModalContent",children:[(0,i.jsx)("div",{children:"Чтобы присоединиться к PIXEL BATTLE"}),(0,i.jsx)("div",{children:"напиши свой ник на VK Play"}),(0,i.jsx)("div",{children:(0,i.jsx)("input",{type:"text",className:"B2wDDG_input",placeholder:"nickname"})}),(0,i.jsxs)("div",{children:["и отправь в чат стрима ",(0,i.jsx)("span",{className:"B2wDDG_command",children:"!join"})]}),(0,i.jsx)("button",{onClick:()=>{window.open("https://vkplay.live/pixel_battle/only-chat","",`width=500,height=500,left=${window.innerWidth/2-250},top=${window.innerHeight/2-250}`)},className:y,children:"ОТКРЫТЬ ЧАТ"}),(0,i.jsx)("button",{onClick:P,className:y,children:"Залогинься через Twitch"}),(0,i.jsx)("div",{children:"или"}),(0,i.jsx)("button",{onClick:P,className:y,children:"Залогинься через ВК"})]})}),(0,i.jsxs)("div",{className:"B2wDDG_footer",...S,children:[(0,i.jsx)("a",{href:"https://vkplay.live/place_tv",target:"_blank",children:(0,i.jsx)("img",{src:t(v)})}),(0,i.jsx)("a",{href:"https://www.twitch.tv/place_ru",target:"_blank",children:(0,i.jsx)("img",{src:t(w)})}),(0,i.jsx)("a",{href:"https://www.youtube.com/@Place-ru",target:"_blank",children:(0,i.jsx)("img",{src:t(g)})}),(0,i.jsx)("a",{href:"https://t.me/pixel_battle_online",target:"_blank",children:(0,i.jsx)("img",{src:t(_)})})]}),h&&(0,i.jsx)(u,{})]})}),{}));
//# sourceMappingURL=index.ade3f2e0.js.map
