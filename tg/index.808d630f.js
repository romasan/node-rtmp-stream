var e=globalThis,t={},s={},r=e.parcelRequire8661;null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in s){var r=s[e];delete s[e];var a={id:e,exports:{}};return t[e]=a,r.call(a.exports,a,a.exports),a.exports}var o=Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){s[e]=t},e.parcelRequire8661=r),(0,r.register)("dvwnk",function(e,t){Object.defineProperty(e.exports,"useApp",{get:()=>d,set:void 0,enumerable:!0,configurable:!0});var s=r("fYo6y"),a=r("cu5bI"),o=r("gpLKe"),i=r("ifBWf"),n=r("7Y5nT"),l=r("i63ZM"),c=r("g7WMx");let d=()=>{let[e,t]=(0,s.useState)(""),[r,d]=(0,s.useState)(""),[h,u]=(0,s.useState)(!1),[f,v]=(0,s.useState)(!1),[x,p]=(0,s.useState)({}),g=(0,s.useRef)(-1),{wsStore:w,isAuthorized:C,expiration:M,isOnline:b,finish:j,hasNewMessage:m,role:k,paused:E,setHasNewMessage:S}=(0,a.useWsStore)(),I=(0,o.useMobileLayout)(),[P,L]=(0,s.useState)("CLICK"),A=l.colorSchemes[w.canvas&&w.canvas.colorScheme]||{};(0,s.useEffect)(()=>{let s="truecolor"===(w&&w.canvas&&w.canvas.colorScheme);if(!e&&A){let e="black"in A&&!s?"black":s?(Object.values(A)||[]).pop():(Object.keys(A)||[]).pop();e&&t(e)}},[e,w]),(0,s.useEffect)(()=>{if(j){let e=setInterval(()=>{j<=Date.now()&&(v(!0),clearInterval(e))},1e3);return()=>{clearInterval(e)}}},[j]);let _=e=>{"await"!==e||C||(u(!0),clearTimeout(g.current),g.current=setTimeout(()=>{u(!1)},3e3))};return(0,s.useEffect)(()=>((0,n.default).on("pix",_),()=>{(0,n.default).off("pix",_)}),[C]),(0,s.useEffect)(()=>(0,i.doOnEnter)("life",()=>{(0,i.life)(x.image)}),[x]),(0,s.useEffect)(()=>{let e=()=>{x&&x.centering()};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[x]),{color:e,setColor:t,pickedColor:r,setPickedColor:d,blinkedLoginAnimation:h,isFinished:f,setIsFinished:v,canvas:x,setCanvas:p,wsStore:w,isAuthorized:C,expiration:M,isOnline:b,finish:j,hasNewMessage:m,role:k,paused:E,setHasNewMessage:S,isMobile:I,canvasMode:P,setCanvasMode:L,palette:A,handleCanvasClick:(e,t)=>{if(P===c.EMode.PICK){d(e),L(c.EMode.CLICK);return}},handlePick:e=>{"boolean"==typeof e?(d(""),L(e?c.EMode.PICK:c.EMode.CLICK)):L(e=>e===c.EMode.PICK?c.EMode.CLICK:c.EMode.PICK)},onPix:_}}});var a=r("iM5HV");r("fYo6y");var o=r("b2S2j"),a=r("iM5HV"),i=r("fYo6y"),n=r("PTcTU"),l=r("g7WMx"),c=r("5Ml5F"),d=r("dvwnk"),h=r("hasHI"),u=r("2tSK0"),a=r("iM5HV");r("fYo6y");var f=e=>(0,a.jsxs)("svg",{viewBox:"0 0 39 39",width:40,height:40,xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,a.jsx)("path",{d:"M20.319 0C29.133 0 33.54 0 36.27 2.73 39 5.46 39 9.867 39 18.681v1.638c0 8.814 0 13.221-2.73 15.951C33.54 39 29.133 39 20.319 39h-1.638C9.867 39 5.46 39 2.73 36.27 0 33.54 0 29.133 0 20.32v-1.64C0 9.866 0 5.46 2.73 2.73 5.46 0 9.867 0 18.681 0h1.638z",fill:"rgba(0,119,255,1)"}),(0,a.jsx)("path",{d:"M.117 10.96C0 13.064 0 15.6 0 18.68v1.638c0 2.34 0 4.33.039 6.084C5.148 28.9 12.012 30.42 19.5 30.42c7.488 0 14.352-1.52 19.461-4.017C39 24.648 39 22.62 39 20.32v-1.638c0-3.08 0-5.616-.117-7.76H.117v.038z",fill:"rgba(0,9,180,1)"}),(0,a.jsx)("circle",{cx:27.105,cy:19.695,stroke:"rgba(255,255,255,1)",fill:"rgba(0,9,180,1)",strokeWidth:3.897,r:3.705}),(0,a.jsx)("path",{d:"M16.38 24.18 7.8 15.6m8.58 0L7.8 24.18",stroke:"rgba(255,255,255,1)",strokeWidth:3.897})]}),a=r("iM5HV");r("fYo6y");var v=e=>(0,a.jsxs)("svg",{viewBox:"0 0 30 20",width:40,height:40,xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,a.jsx)("path",{d:"M27.973 3.123A3.578 3.578 0 0 0 25.447.597C23.22 0 14.285 0 14.285 0S5.35 0 3.123.597A3.578 3.578 0 0 0 .597 3.123C0 5.35 0 10 0 10s0 4.65.597 6.877a3.578 3.578 0 0 0 2.526 2.526C5.35 20 14.285 20 14.285 20s8.935 0 11.162-.597a3.578 3.578 0 0 0 2.526-2.526C28.57 14.65 28.57 10 28.57 10s-.002-4.65-.597-6.877Z",fill:"red"}),(0,a.jsx)("path",{d:"M11.425 14.285 18.848 10l-7.423-4.285v8.57Z",fill:"rgba(255,255,255,1)"})]}),x=r("dGUD3"),p=r("2AwaF"),c=r("5Ml5F"),g=r("d165e");(0,c.start)().then(e=>{if("fail"===e){document.location.reload();return}(0,g.connect)(e)}).catch(()=>{});const w=document.getElementById("root");(0,o.createRoot)(w).render((0,a.jsx)(()=>{(0,i.useRef)(-1);let e=(0,h.useModal)({content:(0,a.jsx)(l.Login,{}),width:"300px"}),{color:t,setColor:s,pickedColor:r,setPickedColor:o,blinkedLoginAnimation:g,isFinished:w,setCanvas:C,wsStore:M,isAuthorized:b,expiration:j,isOnline:m,finish:k,hasNewMessage:E,role:S,paused:I,setHasNewMessage:P,isMobile:L,canvasMode:A,setCanvasMode:_,palette:y,handlePick:K}=(0,d.useApp)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:(n&&n.__esModule?n.default:n)("B2wDDG_root",{mobile:L}),children:[(0,a.jsx)(l.HeaderLogo,{}),(0,a.jsx)(l.HeaderControls,{isAuthorized:b,name:M?M.name:"",isOnline:m,hasNewMessage:E,setHasNewMessage:P,blinkedLoginAnimation:g,role:S,login:e.open}),(0,a.jsx)(l.Canvas,{mode:A,color:M.canvas&&"truecolor"===M.canvas.colorScheme?t:y[t],expand:M.canvas,onClick:(s,r)=>{if(A===l.EMode.PICK){o(s),_(l.EMode.CLICK);return}M.needAuthorize&&!b?setTimeout(()=>{e.open()},100):(0,c.addPix)({x:s,y:r,color:t})},expiration:j,isAuthorized:b,isFinished:w,isOnline:m,onInit:C,src:`${c.APIhost}/canvas.png`}),m&&!w&&(0,a.jsx)(l.Palette,{mode:A,color:t,pickedColor:r,colorScheme:M.canvas&&M.canvas.colorScheme,setColor:s,onPick:K}),!!k&&(0,a.jsx)(l.Countdown,{finish:k,text:M.finishText}),I&&(0,a.jsx)("div",{className:"B2wDDG_paused",children:"PAUSE ||"}),(0,a.jsxs)("div",{className:"B2wDDG_footer",children:[(0,a.jsx)("a",{href:"https://vkplay.live/place_tv",target:"_blank",rel:"noreferrer","aria-label":"Стрим на VK Play Live",children:(0,a.jsx)(f,{})}),(0,a.jsx)("a",{href:"https://www.twitch.tv/place_ru",target:"_blank",rel:"noreferrer","aria-label":"Стрим на Twitch",children:(0,a.jsx)(u.default,{})}),(0,a.jsx)("a",{href:"https://www.youtube.com/@Place-ru",target:"_blank",rel:"noreferrer","aria-label":"Стрим на Twitch",children:(0,a.jsx)(v,{})}),(0,a.jsx)("a",{href:"https://discord.gg/FfVjurYrus",target:"_blank",rel:"noreferrer","aria-label":"Discord сервер пиксель батла",children:(0,a.jsx)(x.default,{})}),(0,a.jsx)("a",{href:"https://t.me/pixel_battle_online",target:"_blank",rel:"noreferrer","aria-label":"Telegram канал пиксель батла",children:(0,a.jsx)(p.default,{})})]})]}),e.render()]})},{}));